spec:
  inputs:
    stage:
      default: RX-DeployDTPackage
    rules:
      default: '"true" == "true"'
---
RX-DeployDTPackage-Component:
  stage: $[[ inputs.stage ]]
  rules: 
    - if: $[[ inputs.rules ]] && $DeployMode != "upload"
      when: on_success
    - if: $[[ inputs.rules ]] && $DeployMode == "upload"
      when: never
  script:
    - $DeployUserName = Get-Variable -ValueOnly "$($DeployDestination)DeployUserName"
    - $DeployUserPassword = Get-Variable -ValueOnly "$($DeployDestination)DeployUserPassword"
    - '& $DTConfigPath\DeploymentToolCore.exe -x -d $PackageProjectPath\package.dat -n "$DeployUserName" -p "$DeployUserPassword"'